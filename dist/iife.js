var nicedb;nicedb=(()=>{"use strict";var e={352:(e,t,n)=>{function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function h(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){return null!==e&&!Array.isArray(e)&&"object"===p(e)}n.d(t,{default:()=>$});var v=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,m=new WeakMap,g=new WeakMap,O=new WeakMap,k=new WeakMap,j=new WeakMap,E=new WeakMap,I=new WeakMap,P=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakMap,W=new WeakMap,N=new WeakMap,D=new WeakMap,x=new WeakMap,_=function(){function e(t,n,r,i){c(this,e),v.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),O.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:void 0}),P.set(this,{writable:!0,value:void 0}),S.set(this,{writable:!0,value:void 0}),A.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),N.set(this,{writable:!0,value:void 0}),D.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0});var o=this;h(this,v,t),h(this,y,n),h(this,b,r),h(this,w,i),h(this,m,{_id:{$gt:0}}),h(this,g,(function(e,t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})),h(this,k,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly",n=f(o,v),r=f(o,b).result.transaction(n,t),i=r.objectStore(n);return r.onerror=function(){throw r.error},"_id"===e?i:i.index(e)})),h(this,j,(function(e){if(d(e)){var t,n=Object.keys(e),r={};n.forEach((function(t){var n=e[t];"$lt"===t?(r.upper=n,r.upperOpen=!0):"$lte"===t?(r.upper=n,r.upperOpen=!1):"$gt"===t?(r.lower=n,r.lowerOpen=!0):"$gte"===t&&(r.lower=n,r.lowerOpen=!1)}));var i=Object.keys(r);if(i.includes("lower")&&i.includes("upper")?t=IDBKeyRange.bound(r.lower,r.upper,r.lowerOpen,r.upperOpen):i.includes("lower")?t=IDBKeyRange.lowerBound(r.lower,r.lowerOpen):i.includes("upper")&&(t=IDBKeyRange.upperBound(r.upper,r.upperOpen)),!t)throw new URIError("The value of the query is invalid.");return t}return IDBKeyRange.only(e)})),h(this,I,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(o,m),t=Object.keys(e);t.length||(t=["_id"],e=f(o,m));var n=t.map((function(t){return new Promise((function(n,r){try{var i=f(o,k).call(o,t),a=f(o,j).call(o,e[t]),u=i.getAllKeys(a);f(o,g).call(o,u,n,r)}catch(e){r(e)}}))}));return Promise.all(n)})),h(this,E,(function(e){return new Promise((function(t,n){try{f(o,I).call(o,e).then((function(e){var n=(e=e.map((function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}))).reduce((function(e,t){var n=e.length<t.length?e:t,r=n!==e?e:t;return n.filter((function(e){return-1!==r.indexOf(e)}))}));t(n)}),(function(e){return n(e)}))}catch(e){n(e)}}))})),h(this,O,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new Promise((function(n,r){try{var i=f(o,v),a=f(o,b).result.transaction(i,t);a.onerror=function(){throw a.error};var u=a.objectStore(i).openCursor();u.onerror=function(){return r(u.error)},u.onsuccess=function(t){u.onsuccess=e,n(t)}}catch(e){r(e)}}))})),h(this,P,(function(e){return new Promise((function(t,n){try{f(o,E).call(o,e).then((function(e){var r=[];function i(n){var i=n.target.result;if(i){i.value._id===e[0]&&(r.push(i.value),e.shift());var o=e[0];void 0!==o?i.continue(o):t(r)}else t(r)}f(o,O).call(o,i).then(i,(function(e){return n(e)}))}),(function(e){return n(e)}))}catch(e){n(e)}}))})),h(this,S,(function(e){return new Promise((function(t,n){try{f(o,E).call(o,e).then((function(e){if(!e.length)return t(void 0);var r=f(o,k).call(o,"_id").get(e[0]);f(o,g).call(o,r,t,n)}),(function(e){return n(e)}))}catch(e){n(e)}}))})),h(this,A,(function(e){return new Promise((function(t,n){try{f(o,E).call(o,e).then((function(e){function r(n){var r=n.target.result;if(r){r.value._id===e[0]&&(r.delete(),e.shift());var i=e[0];void 0!==i?r.continue(i):t()}else t()}f(o,O).call(o,r,"readwrite").then(r,(function(e){return n(e)}))}),(function(e){return n(e)}))}catch(e){n(e)}}))})),h(this,M,(function(e,t,n){return new Promise((function(r,i){try{f(o,E).call(o,e).then((function(e){var u=JSON.parse(JSON.stringify(e));function c(i){var o=i.target.result;if(o){if(o.value._id===e[0]){var c=o.value,l=a(n?{_id:c._id}:a({},c),t);o.update(l),e.shift()}var s=e[0];void 0!==s?o.continue(s):r(u)}else r(u)}f(o,O).call(o,c,"readwrite").then(c,(function(e){return i(e)}))}),(function(e){return i(e)}))}catch(e){i(e)}}))})),h(this,W,(function(e,t){function n(e){var t=p(e);return"number"===t?t=Number.isNaN(e)?"NaN":t:"object"===t&&(t=Array.isArray(e)?"array":e instanceof Date?"date":e instanceof Object?"object":null===e?"null":t),t}t&&"object"===p(t)&&(t=Array.isArray(t)?t:Object.entries(t),e.sort((function(e,r){return t.reduce((function(t,i){if(0!==t)return t;var o=i[0],a=i[1],u=e[o],c=r[o],l=n(u),s=n(c);return l===s?function(e,t,n,r){return"number"===n?(e-t)*r:"string"===n?e>t?1*r:e<t?-1*r:0:"array"===n?e.length>t.length?1*r:e.length<t.length?-1*r:0:e===t?0:e>t?1*r:e<t?-1*r:0}(u,c,l,a):function(e,t,n,r){return"number"===n?-1:"number"===r?1:"NaN"===n?-1:"NaN"===r?1:"string"===n?-1:"string"===r?1:"boolean"===n?-1:"boolean"===r?1:"array"===n?-1:"array"===r?1:"date"===n?-1:"date"===r?1:"object"===n?-1:"object"===r?1:"null"===n?-1:"null"===r?1:0}(0,0,l,s)}),0)})))})),h(this,N,(function(e,t){Number.isInteger(t)&&e.splice(0,t)})),h(this,D,(function(e,t){Number.isInteger(t)&&e.splice(t)})),h(this,x,(function(e,t){var n=this,r=f(n,v),i=f(n,y).support,o=f(n,y).isSuccess;return i?o?void 0:new Promise((function(i,o){try{var a={storeName:r,methodName:e,methodArguments:t,resolve:i};f(n,w).push(a)}catch(e){o(e)}})):new Promise((function(e,t){t(new Error("Impossible: IndexedDB is not supported."))}))}))}return s(e,[{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return f(this,x).call(this,"find",Array.prototype.slice.call(arguments))||new Promise((function(r,i){try{f(n,P).call(n,e).then((function(e){f(n,W).call(n,e,t.sort),f(n,N).call(n,e,t.skip),f(n,D).call(n,e,t.limit),r(e)}),(function(e){return i(e)}))}catch(e){i(e)}}))}},{key:"findOne",value:function(e){var t=this;return f(this,x).call(this,"findOne",Array.prototype.slice.call(arguments))||new Promise((function(n,r){try{f(t,S).call(t,e).then((function(e){n(e)}),(function(e){return r(e)}))}catch(e){r(e)}}))}},{key:"count",value:function(e){var t=this;return f(this,x).call(this,"count",Array.prototype.slice.call(arguments))||new Promise((function(n,r){try{f(t,E).call(t,e).then((function(e){n(e.length)}),(function(e){return r(e)}))}catch(e){r(e)}}))}},{key:"clear",value:function(){var e=this;return f(this,x).call(this,"clear",Array.prototype.slice.call(arguments))||new Promise((function(t,n){try{var r=f(e,k).call(e,"_id","readwrite").clear();f(e,g).call(e,r,t,n)}catch(e){n(e)}}))}},{key:"insert",value:function(e){var t=this;return f(this,x).call(this,"insert",Array.prototype.slice.call(arguments))||new Promise((function(n,r){try{d(e)||r(new URIError("Document Insert failed: It is not object type.")),delete e._id,0===Object.keys(e).length&&r(new URIError("Document Insert failed: It is an empty object."));var i=f(t,k).call(t,"_id","readwrite").add(e);f(t,g).call(t,i,n,r)}catch(e){r(e)}}))}},{key:"remove",value:function(e){var t=this;return f(this,x).call(this,"remove",Array.prototype.slice.call(arguments))||new Promise((function(n,r){try{f(t,A).call(t,e).then((function(){n()}),(function(e){return r(e)}))}catch(e){r(e)}}))}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;return f(this,x).call(this,"update",Array.prototype.slice.call(arguments))||new Promise((function(i,o){try{d(t)||o(new URIError("Document Update failed: Second argument is not object type.")),delete t._id,0===Object.keys(t).length&&o(new URIError("Document Insert failed: Second argument is an empty object.")),f(r,M).call(r,e,t,n).then((function(e){i(e)}),(function(e){return o(e)}))}catch(e){o(e)}}))}}]),e}(),R=new WeakMap,U=new WeakMap,B=new WeakMap,q=new WeakMap,T=new WeakMap;const $=new(function(){function e(){c(this,e),R.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:void 0}),B.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:void 0}),T.set(this,{writable:!0,value:void 0}),h(this,R,[]),h(this,U,null),h(this,B,null),h(this,q,!1),h(this,T,{}),this.onblocked=null}return s(e,[{key:"support",get:function(){return!!indexedDB},set:function(e){return e}},{key:"isSuccess",get:function(){return f(this,q)},set:function(e){return e}},{key:"define",value:function(e){var t=this;if(function(){if(!d(e)||!Object.keys(e).length)throw new URIError("The parameter must be an object defining the stores of IndexedDB.");r(Object.keys(e)).forEach((function(t){var n=e[t];if(!Array.isArray(n)||!n.length)throw new URIError("The '".concat(t,"' store's value is invalid. The value must be an array of length greater than 0."));n.map((function(e,n){var r='Invalid value: "'.concat(n,'" index in "').concat(t,"\" store's array."),i="string"==typeof e&&!e.length,o=null===e||Array.isArray(e),a="object"!==p(e)&&"string"!=typeof e;if(i||o||a)throw new URIError("".concat(r,' Must be "String" or "Object".'));if(!("string"==typeof e||e.name&&"string"==typeof e.name&&e.name.length))throw new URIError("".concat(r," For an object, it must contain { name: String }."))}))}))}(),h(this,B,JSON.parse(JSON.stringify(e))),this.support){var n=indexedDB.open("niceDB",+new Date);h(this,U,n),n.onerror=function(){console.error(n.error)},n.onblocked=function(e){"function"==typeof t.onblocked?t.onblocked(e):console.error("Your database version can't be upgraded because the app is open somewhere else.")},n.onsuccess=function(){h(t,q,!0),f(t,R).map((function(e){var n,i=e.storeName,o=e.methodName,a=e.methodArguments;(0,e.resolve)((n=f(t,T)[i])[o].apply(n,r(a)))}))},n.onupgradeneeded=function(e){try{var n=f(t,U).result,i=r(Object.keys(f(t,B)));r(n.objectStoreNames).filter((function(e){return!i.includes(e)})).forEach((function(e){return n.deleteObjectStore(e)})),i.forEach((function(i){var o,a=e.target.transaction;o=n.objectStoreNames.contains(i)?a.objectStore(i):n.createObjectStore(i,{keyPath:"_id",autoIncrement:!0});var u=function(e){return f(t,B)[e].map((function(e){return"string"==typeof e?{name:e,unique:!1,multiEntry:!1}:{name:e.name,unique:!!e.unique,multiEntry:!!e.multiEntry}}))}(i),c=u.map((function(e){return e.name})),l=r(o.indexNames),s=l.filter((function(e){return!c.includes(e)})),h=u.filter((function(e){return!l.includes(e.name)})),p=u.filter((function(e){return l.includes(e.name)}));s.forEach((function(e){return o.deleteIndex(e)})),h.forEach((function(e){var t=e.name,n={unique:e.unique,multiEntry:e.multiEntry};"_id"!==t&&o.createIndex(t,t,n)})),p.forEach((function(e){var t=o.index(e.name);if(e.unique!==t.unique||e.multiEntry!==t.multiEntry){var n=e.name,r={unique:e.unique,multiEntry:e.multiEntry};o.deleteIndex(n),o.createIndex(n,n,r)}}))}))}catch(e){console.error(e)}}}}},{key:"getStore",value:function(e){var t=Object.keys(f(this,B)),n=f(this,T);if(!t.includes(e))throw new URIError('The "'.concat(e,'" store is undefined.'));return n[e]=n[e]?n[e]:new _(e,this,f(this,U),f(this,R)),n[e]}}]),e}())}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(352)})().default;